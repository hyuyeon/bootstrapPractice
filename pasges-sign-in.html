<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>loginPage</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href="app.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  </head>

<body>
    <main class="d-flex w-100">
        <div class="container-fluid d-flex flex-column">
            <!-- <div class="container d-flex flex-column"> -->
            <div class="row vh-100">
                <div class="col-sm-10 col-md-8 col-lg-6 col-xl-5 mx-auto d-table h-100">
                    <div class="d-table-cell align-middle">
                        <div class="text-center mt-4">
                            <h1 class="h3">  <abbr title="HyperText Markup Language"> 가입</abbr>
                                <small class="text-body-secondary" >해주세요</small>
                            </h1> 
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <div class="m-sm-3">
                                    <form id="sign-in-form">
                                        <div class="mb-3" style="flex-direction: row;">
                                            <label class="form-label">회사이름</label>
                                            <input class="form-control form-control-lg" type="text" name="company"
                                                placeholder="-빼고 입력해주세요." id="company-input" />
                                            <div class="d-grid gap-2 col-12 mx-auto mt-1">
                                                <button class="btn btn-primary" type="button">회사 검색</button>
                                                <button id="searchbutton" type="button" class="btn" data-bs-toggle="button">Toggle button</button>
                                                <a href="#" class="btn active" role="button" data-bs-toggle="button" aria-pressed="true">Active toggle link</a>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">전화번호</label>
                                            <input class="form-control form-control-lg" type="text" name="phone"
                                                placeholder="-빼고 입력해주세요." id="phone-input" />
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">비밀번호</label>
                                            <input class="form-control form-control-lg" type="password" name="password"
                                                placeholder="Enter your password" id="password-input" />
                                        </div>
                                        <div>
                                            <div class="form-check align-items-center">
                                                <input id="customControlInline" type="checkbox" class="form-check-input"
                                                    value="remember-me" name="remember-me" checked />
                                                <label class="form-check-label text-small"
                                                    for="customControlInline">Remember me</label>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2 mt-3">
                                            <!-- <a href="index.html" class="btn btn-lg btn-primary">Sign in</a> -->
                                            <button type="submit" class="btn btn-lg btn-primary">로그인</button>
                                        </div>
                                    </form>

                                    <!-- <script>
                                        document
                                            .getElementById('sign-in-form')
                                            .addEventListener('submit', async function (event) {
                                                event.preventDefault();
                                                const companyInput = document.getElementById('company-input').value;
                                                const phoneInput = document.getElementById('phone-input').value;
                                                const passwdInput = document.getElementById('password-input').value;
                                                const data = {
                                                    cmd: 'login',
                                                    compNick: companyInput, //Essential : 현재는 값을 고정
                                                    id: phoneInput,
                                                    passwd: passwdInput,
                                                    uuid: null,
                                                };
                                                const formBody = Object.keys(data)
                                                    .map(
                                                        (key) =>
                                                            encodeURIComponent(key) +
                                                            '=' +
                                                            encodeURIComponent(data[key])
                                                    )
                                                    .join('&');
                                                const response = await fetch(
                                                    'http://59.12.54.116:60/community/proc_user.php?proc=post',
                                                    {
                                                        method: 'POST',
                                                        headers: {
                                                            'Content-Type': 'application/x-www-form-urlencoded',
                                                        },
                                                        body: formBody,
                                                    }
                                                );
                                                // promise 응답에 대한 결과가 done이면
                                                const result = await response.json();
                                                console.log(result.result[0].uPerm)
                                                if (result.result[0].result.includes("Success")) {
                                                    if (result.result[0].uPerm === "manager" || result.result[0].uPerm === "super-manager") {
                                                        return window.location.href = 'index.html';
                                                    } else {
                                                        alert("감독관이 아닙니다.\n사이트 관리자에게 문의해주세요.")
                                                    }
                                                }
                                                else if (result.result[0].result === "bad-passwd") {
                                                    alert("비밀번호가 틀렸습니다.\n다시 시도해주세요.")
                                                } else if (result.result[0].result === "no reg user or company") {
                                                    alert("회사 이름 혹은 아이디가 틀렸습니다.\n다시 시도해주세요.")
                                                }
                                            });
                                    </script> -->
                                </div>
                            </div>
                        </div>
                        <div class="text-center mb-3">
                            계정이 없으시다면? <a href="pages-sign-up.html"> 회원가입</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- <script src="js/app.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
</body>

</html>